<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>食堂菜单管理系统</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>食堂菜单管理系统</h1>
        
        <div class="nav-tabs">
            <button class="tab active" data-tab="menu-management">菜单管理</button>
            <button class="tab" data-tab="theme-settings">主题设置</button>
            <button class="tab" data-tab="background-settings">背景设置</button>
            <button class="tab" data-tab="system-info">系统信息</button>
        </div>

        <!-- 菜单管理 -->
        <div class="tab-content active" id="menu-management">
            <div class="section">
                <h2 class="section-title">Excel 数据管理</h2>
                <div class="upload-area">
                    <p>下载 Excel 模板，编辑后上传更新菜单数据</p>
                    <button class="btn btn-download" id="download-template">下载 Excel 模板</button>
                    <label class="file-input-label">
                        选择 Excel 文件
                        <input type="file" id="excel-file" accept=".xlsx,.xls,.csv">
                    </label>
                    <div class="file-info" id="file-info"></div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="upload-data">上传数据</button>
                    <button class="btn btn-secondary" id="preview-data">预览数据</button>
                    <button class="btn btn-clear" id="reset-data">重置为默认</button>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">手动管理</h2>
                <button class="btn btn-primary" id="add-dish">添加菜品</button>
                
                <div class="menu-items-list" id="menu-items-list">
                    <!-- 菜单项列表将通过JS动态生成 -->
                </div>
            </div>

            <div class="preview" id="data-preview" style="display: none;">
                <h3 class="preview-title">数据预览</h3>
                <div id="preview-content"></div>
                <div class="action-buttons">
                    <button class="btn btn-primary" id="confirm-upload">确认上传</button>
                    <button class="btn btn-clear" id="cancel-preview">取消</button>
                </div>
            </div>
        </div>

        <!-- 主题设置 -->
        <div class="tab-content" id="theme-settings">
            <div class="section">
                <h2 class="section-title">选择主题</h2>
                <div class="theme-selector">
                    <div class="theme-option theme-spring active" data-theme="spring">
                        <div class="theme-name">春季主题</div>
                        <div class="theme-desc">温暖粉色系</div>
                    </div>
                    <div class="theme-option theme-summer" data-theme="summer">
                        <div class="theme-name">夏季主题</div>
                        <div class="theme-desc">清爽蓝色系</div>
                    </div>
                    <div class="theme-option theme-autumn" data-theme="autumn">
                        <div class="theme-name">秋季主题</div>
                        <div class="theme-desc">丰收橙色系</div>
                    </div>
                    <div class="theme-option theme-winter" data-theme="winter">
                        <div class="theme-name">冬季主题</div>
                        <div class="theme-desc">冷静紫色系</div>
                    </div>
                </div>
                
                <div class="theme-preview">
                    <h3>预览效果</h3>
                    <div class="preview-display" id="theme-preview">
                        <!-- 主题预览 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 背景设置 -->
        <div class="tab-content" id="background-settings">
            <div class="section">
                <h2 class="section-title">背景图片设置</h2>
                <div class="bg-image-upload">
                    <label class="file-input-label">
                        选择背景图片
                        <input type="file" id="bg-image-file" accept="image/*">
                    </label>
                    <div class="file-info" id="bg-file-info"></div>
                </div>
                
                <img class="bg-preview" id="bg-preview" alt="背景预览">
                
                <div class="bg-actions">
                    <button class="btn btn-primary" id="save-bg-image">保存背景</button>
                    <button class="btn btn-clear" id="clear-bg-image">清除背景</button>
                </div>
                
                <div class="bg-tips">
                    <h3>使用建议：</h3>
                    <ul>
                        <li>推荐使用 3200×192 像素的图片</li>
                        <li>支持 JPG、PNG 格式</li>
                        <li>文件大小不超过 2MB</li>
                        <li>选择对比度适中的图片以确保文字可读性</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 系统信息 -->
        <div class="tab-content" id="system-info">
            <div class="section">
                <h2 class="section-title">系统状态</h2>
                <div class="system-status">
                    <div class="status-item">
                        <span class="status-label">数据库状态:</span>
                        <span class="status-value" id="db-status">检查中...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">最后数据更新:</span>
                        <span class="status-value" id="last-data-update">--</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">菜单项数量:</span>
                        <span class="status-value" id="menu-items-count">--</span>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">操作日志</h2>
                <div class="action-logs" id="action-logs">
                    <!-- 操作日志将通过JS动态生成 -->
                </div>
            </div>
        </div>

        <!-- 消息提示 -->
        <div class="message" id="message"></div>

        <!-- 显示页面链接 -->
        <a href="/display/" class="display-link" target="_blank">查看展示页面 →</a>
    </div>

    <!-- 添加/编辑菜品模态框 -->
    <div class="modal" id="dish-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">添加菜品</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="dish-form">
                <input type="hidden" id="dish-id">
                <div class="form-group">
                    <label for="dish-category">菜品类别</label>
                    <select id="dish-category" required>
                        <option value="">请选择类别</option>
                        <option value="凉菜">凉菜</option>
                        <option value="热菜">热菜</option>
                        <option value="主食">主食</option>
                        <option value="汤品">汤品</option>
                        <option value="水果">水果</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="dish-name">菜品名称</label>
                    <input type="text" id="dish-name" required>
                </div>
                <div class="form-group">
                    <label for="dish-price">价格</label>
                    <input type="number" id="dish-price" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="dish-tag">标签</label>
                    <select id="dish-tag">
                        <option value="">无标签</option>
                        <option value="推荐">推荐</option>
                        <option value="招牌">招牌</option>
                        <option value="热销">热销</option>
                        <option value="新品">新品</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-clear" id="cancel-dish">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
