# ğŸ½ï¸ é£Ÿå ‚èœå•å±•ç¤ºç³»ç»Ÿ

ä¸€ä¸ªç°ä»£åŒ–çš„é£Ÿå ‚èœå•å±•ç¤ºç³»ç»Ÿï¼Œæ”¯æŒå››å­£ä¸»é¢˜åˆ‡æ¢ã€åå°ç®¡ç†å’Œå®æ—¶æ›´æ–°ã€‚ä½¿ç”¨ Cloudflare Pages å’Œ D1 æ•°æ®åº“æ„å»ºã€‚

> **ğŸš€ æ–°æ‰‹ï¼Ÿçœ‹è¿™é‡Œï¼**  
> - **æ–¹å¼ä¸€ï¼ˆæ¨èï¼‰**ï¼šé€šè¿‡ GitHub è‡ªåŠ¨éƒ¨ç½² - ä»£ç æ›´æ–°è‡ªåŠ¨åŒæ­¥  
> - **æ–¹å¼äºŒ**ï¼šç›´æ¥éƒ¨ç½² - Windows è¿è¡Œ `.\deploy.ps1`ï¼Œå…¶ä»–ç³»ç»ŸæŸ¥çœ‹ [å¿«é€Ÿå¼€å§‹](./QUICKSTART.md)  
> - **è¯¦ç»†è¯´æ˜**ï¼šæŸ¥çœ‹ **[ğŸ“– å®Œæ•´éƒ¨ç½²æŒ‡å—](./DEPLOY.md)**

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å‰ç«¯å±•ç¤º
- ğŸ“º **3200Ã—192è¶…å®½å±å±•ç¤º** - ä¸“ä¸ºé•¿æ¡å½¢æ˜¾ç¤ºå±è®¾è®¡
- ğŸ¨ **å››å­£ä¸»é¢˜** - æ˜¥ã€å¤ã€ç§‹ã€å†¬å››ç§ç²¾ç¾ä¸»é¢˜
- â° **å®æ—¶æ—¶é’Ÿ** - æ˜¾ç¤ºå½“å‰æ—¥æœŸã€æ—¶é—´å’Œæ˜ŸæœŸ
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°** - èœå•æ•°æ®å®æ—¶åŒæ­¥
- ğŸ“± **å“åº”å¼é¢„è§ˆ** - åœ¨æ™®é€šæµè§ˆå™¨ä¸­ä¹Ÿèƒ½é¢„è§ˆæ•ˆæœ

### åå°ç®¡ç†
- ğŸ” **å®‰å…¨ç™»å½•** - ç®€å•é«˜æ•ˆçš„ä¼šè¯è®¤è¯
- âœï¸ **èœå•ç¼–è¾‘** - ç›´è§‚çš„èœå“å¢åˆ æ”¹æŸ¥
- ğŸ’¾ **é¢„å­˜èœå•** - å¯ä¿å­˜å¤šå¥—èœå•æ–¹æ¡ˆ
- ğŸ¨ **ä¸»é¢˜åˆ‡æ¢** - ä¸€é”®æ›´æ¢å±•ç¤ºä¸»é¢˜
- ğŸ“Š **åˆ†ç±»ç®¡ç†** - å‡‰èœã€çƒ­èœã€ä¸»é£Ÿã€æ±¤å“ã€æ°´æœ

### æŠ€æœ¯æ ˆ
- ğŸŒ **Cloudflare Pages** - å…¨çƒ CDN åŠ é€Ÿéƒ¨ç½²
- ğŸ’¾ **Cloudflare D1** - SQLite è¾¹ç¼˜æ•°æ®åº“
- âš¡ **Pages Functions** - æ— æœåŠ¡å™¨ API
- ğŸ¯ **åŸç”Ÿ JavaScript** - æ— æ¡†æ¶ä¾èµ–ï¼Œè½»é‡é«˜æ•ˆ
- ğŸ“¦ **çµæ´»éƒ¨ç½²** - æ”¯æŒ GitHub è‡ªåŠ¨éƒ¨ç½²æˆ– Wrangler CLI ç›´æ¥éƒ¨ç½²

## ğŸ“ é¡¹ç›®ç»“æ„

\`\`\`
canteen-menu-system/
â”œâ”€â”€ public/                     # å‰ç«¯é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html             # èœå•å±•ç¤ºé¡µé¢ï¼ˆæ”¯æŒåŠ¨æ€ä¸»é¢˜åˆ‡æ¢ï¼‰
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css          # å±•ç¤ºé¡µåŸºç¡€æ ·å¼
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ themes.js          # å››å­£ä¸»é¢˜é…ç½®
â”‚   â”‚   â””â”€â”€ display.js         # å±•ç¤ºé¡µé€»è¾‘
â”‚   â””â”€â”€ admin/                 # åå°ç®¡ç†æ¨¡å—
â”‚       â”œâ”€â”€ login.html         # åå°ç™»å½•é¡µ
â”‚       â”œâ”€â”€ index.html         # åå°ç®¡ç†é¡µ
â”‚       â”œâ”€â”€ css/
â”‚       â”‚   â””â”€â”€ admin.css      # åå°æ ·å¼
â”‚       â””â”€â”€ js/
â”‚           â””â”€â”€ admin.js       # åå°é€»è¾‘
â”œâ”€â”€ functions/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ [[path]].js        # Cloudflare Pages Functions API
â”œâ”€â”€ database/
â”‚   â””â”€â”€ schema.sql             # D1æ•°æ®åº“ç»“æ„
â”œâ”€â”€ wrangler.toml              # Cloudflareé…ç½®
â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
\`\`\`

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹å¼ä¸€ï¼šGitHub è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

**é€‚åˆéœ€è¦ç‰ˆæœ¬ç®¡ç†å’Œè‡ªåŠ¨éƒ¨ç½²çš„åœºæ™¯**

1. **å°†ä»£ç æ¨é€åˆ° GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/canteen-menu.git
   git push -u origin main
   ```

2. **è¿æ¥åˆ° Cloudflare Pages**
   - è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com)
   - è¿›å…¥ **Workers & Pages** â†’ **Create application** â†’ **Pages**
   - é€‰æ‹© **Connect to Git**
   - æˆæƒå¹¶é€‰æ‹©ä½ çš„ä»“åº“
   - é…ç½®æ„å»ºè®¾ç½®ï¼š
     - **æ„å»ºå‘½ä»¤**: ç•™ç©º
     - **æ„å»ºè¾“å‡ºç›®å½•**: `public`
   - ç‚¹å‡» **Save and Deploy**

3. **é…ç½®æ•°æ®åº“**ï¼ˆéƒ¨ç½²åï¼‰
   - åœ¨é¡¹ç›®è®¾ç½®ä¸­ï¼š**Settings** â†’ **Functions** â†’ **D1 database bindings**
   - æ·»åŠ ç»‘å®šï¼š
     - Variable name: `DB`
     - D1 database: é€‰æ‹© `canteen_menu_db`
   - ä¿å­˜åä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²

**ä¼˜åŠ¿ï¼š**
- âœ… ä»£ç æ›´æ–°è‡ªåŠ¨éƒ¨ç½²
- âœ… å®Œæ•´çš„ç‰ˆæœ¬å†å²
- âœ… æ”¯æŒå›æ»šåˆ°ä»»æ„ç‰ˆæœ¬
- âœ… å›¢é˜Ÿåä½œå‹å¥½

---

### æ–¹å¼äºŒï¼šWrangler CLI ç›´æ¥éƒ¨ç½²

**é€‚åˆæ— æ³•è®¿é—® GitHub æˆ–å¿«é€Ÿéƒ¨ç½²çš„åœºæ™¯**

#### âš¡ ä¸€é”®éƒ¨ç½²ï¼ˆWindowsï¼‰

```powershell
.\deploy.ps1
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰æ­¥éª¤ã€‚

#### ğŸ“– æ‰‹åŠ¨éƒ¨ç½²ï¼ˆæ‰€æœ‰å¹³å°ï¼‰

æŸ¥çœ‹è¯¦ç»†æ­¥éª¤ï¼š**[DEPLOY.md](./DEPLOY.md)** æˆ– **[QUICKSTART.md](./QUICKSTART.md)**

ç®€è¦æµç¨‹ï¼š
```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. ç™»å½• Cloudflare
npx wrangler login

# 3. åˆ›å»ºæ•°æ®åº“
npx wrangler d1 create canteen_menu_db

# 4. æ›´æ–° wrangler.toml ä¸­çš„ database_id

# 5. åˆå§‹åŒ–æ•°æ®åº“
npx wrangler d1 execute canteen_menu_db --file=database/schema.sql

# 6. éƒ¨ç½²
npm run deploy

# 7. åœ¨ Dashboard ä¸­ç»‘å®š D1 æ•°æ®åº“
#    Settings â†’ Functions â†’ D1 database bindings

# 8. é‡æ–°éƒ¨ç½²ä½¿ç»‘å®šç”Ÿæ•ˆ
npm run deploy
```

**ä¼˜åŠ¿ï¼š**
- âœ… æ— éœ€ Git å’Œ GitHub
- âœ… éƒ¨ç½²é€Ÿåº¦å¿«
- âœ… é€‚åˆä¸ªäººé¡¹ç›®

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- **[DEPLOY.md](./DEPLOY.md)** - å®Œæ•´éƒ¨ç½²æŒ‡å—ï¼ˆæ¨èå…ˆçœ‹è¿™ä¸ªï¼‰
- **[PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md)** - é¡¹ç›®ç»“æ„è¯´æ˜

---

## ğŸš€ åŸéƒ¨ç½²æŒ‡å—

### å‰ç½®æ¡ä»¶

1. æ³¨å†Œ [Cloudflare](https://cloudflare.com) è´¦å·
2. å®‰è£… [Node.js](https://nodejs.org/) (v16+)
3. å®‰è£… Wrangler CLI:
   \`\`\`bash
   npm install -g wrangler
   \`\`\`

### æ­¥éª¤1: åˆ›å»ºD1æ•°æ®åº“

\`\`\`bash
# ç™»å½•Cloudflare
wrangler login

# åˆ›å»ºD1æ•°æ®åº“
wrangler d1 create canteen_menu_db

# è®°ä¸‹è¿”å›çš„database_idï¼Œæ›´æ–°åˆ°wrangler.tomlä¸­
\`\`\`

### æ­¥éª¤2: åˆå§‹åŒ–æ•°æ®åº“

\`\`\`bash
# æ‰§è¡Œæ•°æ®åº“schema
wrangler d1 execute canteen_menu_db --file=database/schema.sql
\`\`\`

### æ­¥éª¤3: é…ç½®é¡¹ç›®

ç¼–è¾‘ `wrangler.toml`ï¼Œæ›¿æ¢ï¼š
- `database_id`: æ›¿æ¢ä¸ºæ­¥éª¤1ä¸­è·å¾—çš„ID

é¡¹ç›®å·²å†…ç½®ç®€å•è®¤è¯ç³»ç»Ÿï¼Œæ— éœ€é¢å¤–é…ç½®å¯†é’¥ã€‚

### æ­¥éª¤4: æœ¬åœ°å¼€å‘

\`\`\`bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨
npm run dev
\`\`\`

è®¿é—® http://localhost:8788 æŸ¥çœ‹æ•ˆæœ

### æ­¥éª¤5: éƒ¨ç½²åˆ°Cloudflare Pages

#### æ–¹æ³•1: é€šè¿‡GitHubè‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. å°†ä»£ç æ¨é€åˆ°GitHubä»“åº“
2. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com)
3. è¿›å…¥ Pages â†’ Create a project â†’ Connect to Git
4. é€‰æ‹©ä½ çš„ä»“åº“ï¼Œé…ç½®æ„å»ºè®¾ç½®ï¼š
   - Build command: (ç•™ç©º)
   - Build output directory: \`.\`
5. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   - \`DATABASE_ID\`: ä½ çš„D1æ•°æ®åº“ID
6. ç‚¹å‡» Deploy

#### æ–¹æ³•2: ç›´æ¥éƒ¨ç½²

\`\`\`bash
# éƒ¨ç½²åˆ°Cloudflare Pages
npm run deploy
\`\`\`

### æ­¥éª¤6: ç»‘å®š D1 æ•°æ®åº“

1. åœ¨ Cloudflare Dashboard ä¸­æ‰“å¼€ä½ çš„ Pages é¡¹ç›®
2. è¿›å…¥ Settings â†’ Functions â†’ D1 database bindings
3. æ·»åŠ ç»‘å®šï¼š
   - Variable name: `DB`
   - D1 database: é€‰æ‹© `canteen_menu_db`
4. ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²ä¸€æ¬¡ï¼ˆ`npm run deploy`ï¼‰

## ğŸ”§ ä½¿ç”¨è¯´æ˜

### èœå•å±•ç¤º

è®¿é—® \`https://your-project.pages.dev/\` æŸ¥çœ‹èœå•å±•ç¤ºé¡µé¢

### åå°ç®¡ç†

1. è®¿é—® `https://your-project.pages.dev/admin/login.html`
2. é»˜è®¤è´¦å·ï¼š
   - ç”¨æˆ·å: `admin`
   - å¯†ç : `admin123`
   - âš ï¸ **ç”Ÿäº§ç¯å¢ƒè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**

3. ç™»å½•åå¯ä»¥ï¼š
   - **ç¼–è¾‘å½“å‰èœå•** - çµæ´»è°ƒæ•´å„åˆ†ç±»èœå“æ•°é‡
   - **ä¿å­˜é¢„å­˜èœå•** - ä¿å­˜å¸¸ç”¨èœå•é…ç½®
   - **åˆ‡æ¢å±•ç¤ºä¸»é¢˜** - ä¸€é”®æ›´æ¢å››å­£ä¸»é¢˜
   - **é¢„è§ˆèœå•æ•ˆæœ** - å®æ—¶æŸ¥çœ‹å‰å°æ˜¾ç¤º

#### èœå“æ•°é‡è¯´æ˜
- ğŸŸ¢ **æ¨èæ•°é‡**ï¼šå‡‰èœ2ç§ã€çƒ­èœ6ç§ã€ä¸»é£Ÿ6ç§ã€æ±¤å“2ç§ã€æ°´æœ2ç§
- ğŸŸ¡ **çµæ´»è°ƒæ•´**ï¼šæ—©æ™šé¤å¯å‡å°‘èœå“ï¼ˆå¦‚çƒ­èœ3-4ç§ï¼‰ï¼Œå‰å°è‡ªåŠ¨é€‚é…å¸ƒå±€
- ğŸ”´ **è¶…å‡ºæç¤º**ï¼šè¶…è¿‡æ¨èæ•°é‡æ—¶ä¼šæç¤ºï¼Œä½†ä»å¯æ·»åŠ 
- âœ¨ **è‡ªé€‚åº”æ˜¾ç¤º**ï¼šå‰å°æ ¹æ®èœå“æ•°é‡è‡ªåŠ¨è°ƒæ•´å­—ä½“å’Œé—´è·ï¼Œç¡®ä¿ä¸æº¢å‡º

### ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 

æ–¹æ³•1: é€šè¿‡D1æ§åˆ¶å°
\`\`\`sql
UPDATE users SET password = 'æ–°å¯†ç ' WHERE username = 'admin';
\`\`\`

æ–¹æ³•2: é€šè¿‡Wrangler
\`\`\`bash
wrangler d1 execute canteen_menu_db --command="UPDATE users SET password = 'æ–°å¯†ç ' WHERE username = 'admin'"
\`\`\`

## ğŸ¨ å››å­£ä¸»é¢˜

### æ˜¥å­£ä¸»é¢˜
- æ¸…æ–°çš„ç²‰ç»¿è‰²è°ƒ
- æŸ”å’Œçš„æ¸å˜æ•ˆæœ
- é€‚åˆæ˜¥å­£å±•ç¤º

### å¤å­£ä¸»é¢˜
- æ¸…å‡‰çš„è“è‰²ç³»
- æ´»åŠ›å››å°„çš„é…è‰²
- é€‚åˆå¤å­£å±•ç¤º

### ç§‹å­£ä¸»é¢˜
- æ¸©æš–çš„æ©™é»„è‰²è°ƒ
- ä¸°æ”¶çš„è§†è§‰æ„Ÿå—
- é€‚åˆç§‹å­£å±•ç¤º

### å†¬å­£ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰
- ä¼˜é›…çš„ç´«è‰²ç³»
- æ²‰ç¨³å¤§æ°”çš„é£æ ¼
- é€‚åˆå†¬å­£å±•ç¤º

## ğŸ“Š æ•°æ®åº“ç»“æ„

### usersï¼ˆç”¨æˆ·è¡¨ï¼‰
- \`id\`: ç”¨æˆ·ID
- \`username\`: ç”¨æˆ·å
- \`password\`: å¯†ç ï¼ˆç”Ÿäº§ç¯å¢ƒåº”åŠ å¯†ï¼‰
- \`created_at\`: åˆ›å»ºæ—¶é—´

### current_menuï¼ˆå½“å‰èœå•è¡¨ï¼‰
- \`id\`: å›ºå®šä¸º1
- \`menu_data\`: èœå•JSONæ•°æ®
- \`theme\`: å½“å‰ä¸»é¢˜
- \`updated_at\`: æ›´æ–°æ—¶é—´

### menu_presetsï¼ˆé¢„å­˜èœå•è¡¨ï¼‰
- \`id\`: é¢„å­˜ID
- \`name\`: é¢„å­˜åç§°
- \`menu_data\`: èœå•JSONæ•°æ®
- \`theme\`: ä¸»é¢˜
- \`created_at\`: åˆ›å»ºæ—¶é—´

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç ** - éƒ¨ç½²åç«‹å³ä¿®æ”¹adminå¯†ç 
2. **å†…éƒ¨ä½¿ç”¨** - æœ¬ç³»ç»Ÿé€‚åˆå†…éƒ¨ç½‘ç»œä½¿ç”¨
3. **å®šæœŸå¤‡ä»½** - å®šæœŸå¤‡ä»½D1æ•°æ®åº“æ•°æ®
4. **HTTPS** - Cloudflare Pagesé»˜è®¤æä¾›HTTPS
5. **è®¿é—®æ§åˆ¶** - å¯æ·»åŠ IPç™½åå•é™åˆ¶åå°è®¿é—®

## ğŸ“ è‡ªå®šä¹‰

### ä¿®æ”¹å±å¹•å°ºå¯¸
ç¼–è¾‘ \`public/css/style.css\` ä¸­çš„ï¼š
\`\`\`css
body {
    width: 3200px;  /* ä¿®æ”¹å®½åº¦ */
    height: 192px;  /* ä¿®æ”¹é«˜åº¦ */
}
\`\`\`

### ä¿®æ”¹èœå“æ•°é‡é™åˆ¶
ç¼–è¾‘ \`public/admin/index.html\` ä¸­çš„ \`data-recommend\` å±æ€§

### æ·»åŠ æ–°ä¸»é¢˜
ç¼–è¾‘ \`themes.js\`ï¼Œæ·»åŠ æ–°çš„ä¸»é¢˜é…ç½®

## ğŸ› æ•…éšœæ’æŸ¥

### ç™»å½•å¤±è´¥
- æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–
- ç¡®è®¤D1ç»‘å®šé…ç½®æ­£ç¡®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### èœå•ä¸æ˜¾ç¤º
- ç¡®è®¤APIç«¯ç‚¹å¯è®¿é—®
- æ£€æŸ¥D1æ•°æ®åº“æ•°æ®
- æŸ¥çœ‹Networké¢æ¿APIå“åº”

### éƒ¨ç½²å¤±è´¥
- ç¡®è®¤wrangler.tomlé…ç½®æ­£ç¡®
- æ£€æŸ¥database_idæ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—é”™è¯¯ä¿¡æ¯

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤Issueæˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚
